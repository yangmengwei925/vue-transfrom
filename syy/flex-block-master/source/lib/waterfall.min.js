"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}!function(t,e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.export?module.exports=e:t.waterfall=e}(window,function(i){var c,u,a,o,l=this,s=arguments,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.direction||"v",f=Number(t.spacing)||20,h=Number(t.baseWidth)||250,y=Number(t.height)||260,d=Number(t.accuracy)||2,m=t.datas||null,g=t.rowClass||"",p=t.itemClass||"",v=function(t){return Math.floor(100*t)/100},b=function(){var t=document.createElement("div"),e="";return m.forEach(function(t){e+="string"==typeof t?'\n                    <div class="fall-item">\n                        <img alt="'+t+'" src="'+t+'"/>\n                    </div>\n                ':'\n                    <div class="fall-item">\n                        <img alt="'+t.url+'" src="'+t.url+'"/>\n                    </div>\n                '}),t.innerHTML=e,t.children},w=function(t){return t+"px"},n=function(){c.innerHTML="";var o=c.clientWidth,l=0,a=[],r=[],i=function(){if(!(a.length<1)){var t=o-(a.length-1)*f,n=0,i=0;1==a.length?i=y:(a.forEach(function(t){var e=t.querySelector("img");n+=e.width/e.height}),i=v(t/n)-d),a.forEach(function(t,e){var n=t.querySelector("img"),r=n.width/n.height*i;n.style.height=i+"px",e===a.length-1?(n.style.width="auto",t.style.marginRight=0):(n.style.width=r+"px",t.style.marginRight=f+"px")}),r.push(a),l=0,a=[]}};u.forEach(function(t,e){var n=t.querySelector("img"),r=v(y/n.naturalHeight)*n.naturalWidth;(t.dataset.index=e,o<l+r)&&(function(n){var t=Array.from(arguments).splice(1,arguments.length),r=n,i=n;return t.forEach(function(t){var e=Math.abs(t-n);e<i&&(i=e,r=t)}),r}(o,l,l+r)===l&&i());l+=r+=f,a.push(t),e>=u.length-1&&i()}),r.forEach(function(t,e){var n=document.createElement("div");g&&n.classList.add(g),n.classList.add("fall-row"),n.style.display="flex",n.style.justifyContent="space-between",e<r.length-1&&(n.style.marginBottom=f+"px"),n.append.apply(n,_toConsumableArray(t)),c.appendChild(n)})},E=function(){c.innerHTML="","h"===e?n():function(){var t=c.clientWidth,e=Math.floor((t+f)/(h+f));e<1&&(e=1);var l=(t+f)/e-f;u.length<e&&(e=u.length,l=(t+f)/e-f),a={};for(var n=0;n<e;n++)a[n]=0;u.forEach(function(t){var e=t.querySelector("img"),n=e.naturalWidth,r=e.naturalHeight*(l/n),i=function(t){var e=0;for(var n in t)t[n]<t[e]&&(e=n);return e}(a),o=a[i]||0;e.style.width="100%",e.style.maxWidth="100%",t.style.position="absolute",t.style.top=w(o),t.style.left=w((l+f)*i),t.style.width=w(l),t.style.height=w(r),a[i]=o+r+f,c.appendChild(t)});var r=function(t){var e=0;for(var n in t)t[n]>t[e]&&(e=n);return e}(a);c.style.height=w(a[r])}()};!function(){if(i&&"string"==typeof i&&(c=document.querySelector(i),(u=m&&0<m.length?Array.from(b()):Array.from(c.children)).length)){o=u.length;var t,e,n,r=function(){--o<=0&&E()};u.forEach(function(t){p&&!t.classList.contains(p)&&t.classList.add(p);var e=t.querySelector("img");e.complete?r():(e.onload=function(){r()},e.onerror=function(n){u.forEach(function(t,e){t.querySelector("img").src===n.target.src&&u.splice(e,1)}),r()}),e.style.display="block"}),c.style.position="relative",c.style.overflow="hidden",window.addEventListener("resize",(t=E,e=500,n=null,function(){clearTimeout(n),n=setTimeout(function(){return t.bind(l)(s)},e)}))}}()});